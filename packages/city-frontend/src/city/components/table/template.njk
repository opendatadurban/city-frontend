{% from "../../macros/attributes.njk" import cityAttributes -%}

<table class="city-table
  {%- if params.classes %} {{ params.classes }}{% endif %}"
  {{- cityAttributes(params.attributes) }}>
{% if params.caption %}
  <caption class="city-table__caption
    {%- if params.captionClasses %} {{ params.captionClasses }}{% endif %}">
    {{- params.caption -}}
  </caption>
{% endif %}
{% if params.head %}
  <thead class="city-table__head">
    <tr class="city-table__row">
    {% for item in params.head %}
      <th scope="col" class="city-table__header
        {%- if item.format %} city-table__header--{{ item.format }}{% endif %}
        {%- if item.classes %} {{ item.classes }}{% endif %}"
        {%- if item.colspan %} colspan="{{ item.colspan }}"{% endif %}
        {%- if item.rowspan %} rowspan="{{ item.rowspan }}"{% endif %}
        {{- cityAttributes(item.attributes) }}>
          {{- item.html | safe if item.html else item.text -}}
        </th>
    {% endfor %}
    </tr>
  </thead>
{% endif %}
  <tbody class="city-table__body">
{% for row in params.rows %}
  {% if row %}
    <tr class="city-table__row">
    {% for cell in row %}
      {% set commonAttributes %}
        {%- if cell.colspan %} colspan="{{ cell.colspan }}"{% endif %}
        {%- if cell.rowspan %} rowspan="{{ cell.rowspan }}"{% endif %}
        {{- cityAttributes(cell.attributes) -}}
      {% endset %}
      {% if loop.first and params.firstCellIsHeader %}
      <th scope="row" class="city-table__header
        {%- if cell.classes %} {{ cell.classes }}{% endif %}"
        {{- commonAttributes | safe }}>
        {{- cell.html | safe if cell.html else cell.text -}}
      </th>
      {% else %}
      <td class="city-table__cell
        {%- if cell.format %} city-table__cell--{{ cell.format }}{% endif %}
        {%- if cell.classes %} {{ cell.classes }}{% endif %}"
        {{- commonAttributes | safe }}>
        {{- cell.html | safe if cell.html else cell.text -}}
      </td>
      {% endif %}
    {% endfor %}
    </tr>
  {% endif %}
{% endfor %}
  </tbody>
</table>
