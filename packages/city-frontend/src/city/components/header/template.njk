{% from "../../macros/attributes.njk" import cityAttributes %}

{%- set menuButtonText = params.menuButtonText if params.menuButtonText else 'Menu' -%}

<header class="city-header {%- if params.classes %} {{ params.classes }}{% endif %}" data-module="city-header"
  {{- cityAttributes(params.attributes) }}>
  <div class="city-header__container {{ params.containerClasses | default("city-width-container", true) }}">
    <div class="city-header__logo">
      <a href="{{ params.homepageUrl | default("/", true) }}" class="city-header__link city-header__link--homepage">
        {#- The SVG needs `focusable="false"` so that Internet Explorer does
        not treat it as an interactive element - without this it will be
        'focusable' when using the keyboard to navigate.

        We use a single compound path for the logo to prevent subpixel rounding
        shifting different elements unevenly relative to one another. #}
        {% if (params.productName) %}
        <span class="city-header__product-name">
          {{ params.productName }}
        </span>
        {% endif %}
      </a>
    </div>
  {% if params.serviceName or params.navigation | length %}
    <div class="city-header__content">
    {% if params.serviceName %}
      {% if params.serviceUrl %}
      <a href="{{ params.serviceUrl }}" class="city-header__link city-header__service-name">
        {{ params.serviceName }}
      </a>
      {% else %}
      <span class="city-header__service-name">
        {{ params.serviceName }}
      </span>
      {% endif %}
    {% endif %}
    {% if params.navigation | length %}
      <nav aria-label="{{ params.navigationLabel | default(menuButtonText, true) }}" class="city-header__navigation {%- if params.navigationClasses %} {{ params.navigationClasses }}{% endif %}">
        <button type="button" class="city-header__menu-button city-js-header-toggle" aria-controls="navigation" {%- if params.menuButtonLabel and params.menuButtonLabel != menuButtonText %} aria-label="{{ params.menuButtonLabel }}"{% endif %} hidden>
          {{ menuButtonText }}
        </button>

        <ul id="navigation" class="city-header__navigation-list">
        {% for item in params.navigation %}
          {% if item.text or item.html %}
          <li class="city-header__navigation-item {%- if item.active %} city-header__navigation-item--active{% endif %}">
            {% if item.href %}
            <a class="city-header__link" href="{{ item.href }}"
              {{- cityAttributes(item.attributes) -}}>
            {% endif %}
              {{ item.html | safe | trim | indent(14) if item.html else item.text }}
            {% if item.href %}
            </a>
            {% endif %}
          </li>
          {% endif %}
        {% endfor %}
        </ul>
      </nav>
    {% endif %}
    </div>
  {% endif %}
  </div>
</header>
